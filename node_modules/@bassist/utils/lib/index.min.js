/**
 * name: @bassist/utils
 * version: v0.4.0
 * description: Opinionated collection of common JavaScript / TypeScript utils by @chengpeiquan .
 * author: chengpeiquan <chengpeiquan@chengpeiquan.com>
 * homepage: https://paka.dev/npm/@bassist/utils
 * license: MIT
 */
(function(n,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("@withtypes/mime")):typeof define=="function"&&define.amd?define(["exports","@withtypes/mime"],a):(n=typeof globalThis<"u"?globalThis:n||self,a(n.Utils={},n["@withtypes/mime"]))})(this,function(n,a){"use strict";var at=Object.defineProperty;var ct=(n,a,u)=>a in n?at(n,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[a]=u;var g=(n,a,u)=>(ct(n,typeof a!="symbol"?a+"":a,u),u);const u={isSupported:typeof navigator>"u"?!1:Boolean(navigator.clipboard),async copy(t){if(!this.isSupported)return!1;const e=t.innerText||t.value;return await this.write(e)},async cut(t){return!this.isSupported||!await this.copy(t)?!1:(t.value="",!0)},async read(){return this.isSupported?await navigator.clipboard.readText():""},async write(t){return this.isSupported?(await navigator.clipboard.writeText(t),!0):!1}};function m(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function p(t){return m(t)==="object"}function f(t,e){return p(t)?Object.prototype.hasOwnProperty.call(t,e):!1}const d=typeof window<"u",O=!d,c=d?navigator.userAgent.toLowerCase():"",y=/iPhone|phone|android|iPod|pad|iPad/i,R=y.test(c),T=!y.test(c),M=/Android/i.test(c),$=/iPhone|iPod|iPad|iOS/i.test(c),q=/uni-app|html5plus/.test(c),A=/MicroMessenger/i.test(c),C=/\sQQ|mqqbrowser|qzone|qqbrowser/i.test(c),I=/mqqbrowser|qqbrowser/i.test(c),B=/qzone\/.*_qz_([\d.]+)/i.test(c),z=/(weibo).*weibo__([\d.]+)/i.test(c),D=/(baiduboxapp)\/([\d.]+)/i.test(c);function w(t){return t.startsWith("data")&&t.includes("base64")?t.split(",")[0].replace(/data:(.*);base64/,"$1"):a.getType(t)||""}function v(t){return a.getExtension(t)||""}function N(t){const e=w(t);return v(e)}function P(t,e=!1){return t=t?String(t):"",t=t.replace(/[^\d]/g,""),t&&!e&&(t=parseInt(t)),String(t)}function _(t){if(t=String(t),!t)return"0.00";const e=t.split("."),i=e[0],s=e[1];return e.length===1?`${i}.00`:s.length===1?`${t}0`:Number(t).toFixed(2)}function j(t,e){return String(t).length>e?String(t).slice(0,e)+"â€¦":String(t)}function L([t,...e]){return t?(t==null?void 0:t.toUpperCase())+e.join("").toLowerCase():""}function U({type:t,id:e,resource:i}){return new Promise((s,o)=>{if(!d||document.querySelector(e)){o();return}function l(r){r.addEventListener("load",s),r.addEventListener("error",o),r.addEventListener("abort",o)}switch(t){case"js":{const r=document.createElement("script");r.async=!0,r.src=i,l(r),document.head.appendChild(r);break}case"css":{const r=document.createElement("link");r.id=e,r.rel="stylesheet",r.href=i,l(r),document.head.appendChild(r);break}case"style":{const r=document.createElement("style");r.id=e,l(r),document.head.appendChild(r),r.appendChild(document.createTextNode(i));break}}})}function b(t){let e="";if(d){const{search:s}=window.location;e=s}if(typeof t=="string"&&t.startsWith("http")){const s=t.indexOf("?");e=s===-1?"":t.slice(s)}if(e.includes("#")){const s=e.indexOf("#");e=e.slice(0,s)}if(!e.length)return{};const i={};return e.slice(1).split("&").forEach(s=>{const[o,l]=s.split("=");i[o]=decodeURIComponent(l)}),i}function W(t){const e=b(t),i={};return Object.keys(e).forEach(o=>{o!=="path"&&(i[o]=e[o])}),{path:e.path||"",params:i}}function F(t,e){return b(e)[t]||""}function Z(t){return p(t)?Object.keys(t).map(e=>`${e}=${encodeURIComponent(String(t[e]))}`).join("&"):""}function E(t=0,e=100,i="round"){return Math[i](Math.random()*(e-t)+t)}function J(t=10){const e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let i="",s=t;const o=e.length;for(;s--;)i+=e[Math.random()*o|0];return i}function K(){const t=E(0,1);return[!0,!1][t]}function V(t){if(!Array.isArray(t))return t;for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t}function X(t){return/^1[3456789]\d{9}$/.test(String(t))}function G(t){return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(t)}function H(t){return/https?:\/\/[\w-]+(\.[\w-]+){1,2}(\/[\w-]{3,6}){0,2}(\?[\w_]{4,6}=[\w_]{4,6}(&[\w_]{4,6}=[\w_]{4,6}){0,2})?/.test(t)}function Y(t){const e=/^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,i=/^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/;return e.test(t)||i.test(t)}function x(t){return/^([1-9]{1})(\d{15}|\d{16}|\d{18})$/.test(t)}function Q(){return process.env.NODE_ENV}const tt=Q();function h(t){return process.env.NODE_ENV===t}const et=h("development"),nt=h("test"),it=h("production"),S={};class st{constructor(e){g(this,"data");this.data={};const i=f(S,e);this.data=i?S[e].data:{},i||(S[e]=this)}get length(){return Object.keys(this.data).length}clear(){this.data={}}getItem(e){return f(this.data,e)?this.data[e]:null}setItem(e,i){this.data[e]=i}removeItem(e){f(this.data,e)&&delete this.data[e]}key(e){const i=Object.keys(this.data);return e>i.length?null:i[e]}}class k{constructor(e,i){g(this,"prefix");g(this,"storage");this.prefix=e,this.storage=d?window[i]:new st(e)}get(e){const i=this.storage.getItem(`${this.prefix}-${e}`);if(!i)return i;try{return i==="true"?!0:i==="false"?!1:i==="null"?null:i==="undefined"?void 0:JSON.parse(i)}catch{return i}}set(e,i){try{const o=m(i)==="string"?i:JSON.stringify(i);this.storage.setItem(`${this.prefix}-${e}`,o)}catch(s){console.log(s)}}remove(e){this.storage.removeItem(`${this.prefix}-${e}`)}clear(){this.list().forEach(i=>{this.remove(i)})}count(){return this.list().length}list(){if(!this.prefix)return[];const e=[],i=this.storage.length;for(let s=0;s<i;s++){const o=this.storage.key(s);o!=null&&o.startsWith(this.prefix)&&e.push(o.replace(`${this.prefix}-`,""))}return e}}class rt extends k{constructor(e){super(e,"localStorage")}}class ot extends k{constructor(e){super(e,"sessionStorage")}}n.LocalStorage=rt,n.SessionStorage=ot,n.capitalize=L,n.checkRuntimeEnv=h,n.clipboard=u,n.ellipsis=j,n.extractNumber=P,n.extractQueryInfo=W,n.formatAmount=_,n.getDataType=m,n.getExtension=N,n.getExtensionFromMimeType=v,n.getMimeType=w,n.getQuery=F,n.getRuntimeEnv=Q,n.hasKey=f,n.isAndroid=M,n.isBaidu=D,n.isBankCard=x,n.isBrowser=d,n.isDesktop=T,n.isDevRuntime=et,n.isEmail=G,n.isIOS=$,n.isIdCard=Y,n.isMob=X,n.isMobile=R,n.isObject=p,n.isProdRuntime=it,n.isQQ=C,n.isQQBrowser=I,n.isQzone=B,n.isServer=O,n.isTestRuntime=nt,n.isUniApp=q,n.isUrl=H,n.isWeibo=z,n.isWeixin=A,n.loadRes=U,n.mobileDevicesRegExp=y,n.parseQuery=b,n.randomBoolean=K,n.randomNumber=E,n.randomString=J,n.runtimeEnv=tt,n.shuffle=V,n.stringifyQuery=Z,n.ua=c,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
