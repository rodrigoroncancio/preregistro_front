{"version":3,"file":"vue-imask.js","sources":["../src/props.ts","../src/composable.ts","../src/utils.ts","../src/component3-composition.ts","../src/component2.ts","../src/component.ts","../src/directive.ts"],"sourcesContent":["import { type PropType } from 'vue-demi';\nimport { type FactoryOpts, type MaskedDynamicOptions } from 'imask';\n\nexport default {\n  // common\n  mask: undefined as unknown as PropType<FactoryOpts['mask']>,\n  prepare: Function as PropType<FactoryOpts['prepare']>,\n  prepareChar: Function as PropType<FactoryOpts['prepareChar']>,\n  validate: Function as PropType<FactoryOpts['validate']>,\n  commit: Function as PropType<FactoryOpts['commit']>,\n  overwrite: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  eager: {\n    required: false,\n    default: undefined,\n    validator: (value: unknown) => ['append', 'remove'].includes(value as string) || typeof value === 'boolean',\n  },\n  skipInvalid: { type: Boolean, required: false, default: undefined },\n\n  // pattern\n  placeholderChar: String,\n  displayChar: String,\n  lazy: { type: Boolean, required: false, default: undefined },\n  definitions: Object,\n  blocks: Object,\n\n  // enum\n  enum: Array,\n\n  // range\n  maxLength: Number,\n  from: Number,\n  to: Number,\n\n  // date\n  pattern: String,\n  format: Function as PropType<FactoryOpts['format']>,\n  parse: Function as PropType<FactoryOpts['parse']>,\n  autofix: {\n    required: false,\n    default: undefined,\n    validator: (value: unknown) => value === 'pad' || typeof value === 'boolean',\n  },\n\n  // number\n  radix: String,\n  thousandsSeparator: String,\n  mapToRadix: Array,\n  scale: Number,\n  normalizeZeros: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  padFractionalZeros: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  min: [Number, Date],\n  max: [Number, Date],\n\n  // dynamic\n  dispatch: Function as PropType<MaskedDynamicOptions['dispatch']>\n};\n","import { ref, readonly, isRef, watch, onMounted, onUnmounted, type DeepReadonly, type Ref } from 'vue-demi';\nimport IMask, { type FactoryOpts, type InputMaskElement, type InputMask } from 'imask';\n\nexport\ntype ComposableEmitEventBase = 'accept' | 'complete';\n\nexport\ntype ComposableEmitEvent = ComposableEmitEventBase | `${ComposableEmitEventBase}:masked` | `${ComposableEmitEventBase}:typed` | `${ComposableEmitEventBase}:unmasked`;\n\nexport\ntype ComposableEmitValue<E extends ComposableEmitEvent, Opts extends FactoryOpts> =\n  E extends ComposableEmitEventBase | `${ComposableEmitEventBase}:masked` ? InputMask<Opts>['value'] :\n  E extends `${ComposableEmitEventBase}:unmasked` ? InputMask<Opts>['unmaskedValue'] :\n  E extends `${ComposableEmitEventBase}:typed` ? InputMask<Opts>['typedValue'] :\n  never\n;\n\nexport\ntype ComposableParams<Opts extends FactoryOpts> = {\n  emit?: <E extends ComposableEmitEvent>(eventName: E, value: ComposableEmitValue<E, Opts>, e?: InputEvent) => void,\n  onAccept?: (e?: InputEvent) => void,\n  onComplete?: (e?: InputEvent) => void,\n  defaultValue?: InputMask<Opts>['value'],\n  defaultUnmaskedValue?: InputMask<Opts>['unmaskedValue'],\n  defaultTypedValue?: InputMask<Opts>['typedValue'],\n}\n\nexport default\nfunction useIMask<\n  MaskElement extends InputMaskElement,\n  Opts extends FactoryOpts\n> (props: Opts | Ref<Opts>, {\n    emit, onAccept, onComplete, defaultValue, defaultUnmaskedValue, defaultTypedValue,\n  }: ComposableParams<Opts>={}): {\n  el: Ref<MaskElement | undefined>,\n  mask: DeepReadonly<Ref<InputMask<Opts> | undefined>>,\n  masked: Ref<InputMask<Opts>['value']>,\n  unmasked: Ref<InputMask<Opts>['unmaskedValue']>,\n  typed: Ref<InputMask<Opts>['typedValue']>,\n} {\n  const _props = (isRef(props) ? props : ref(props)) as Ref<Opts>;\n  const el: Ref<MaskElement | undefined> = ref();\n  const mask: Ref<InputMask<Opts> | undefined> = ref();\n  const masked: Ref<InputMask<Opts>['value']> = ref('');\n  const unmasked: Ref<InputMask<Opts>['unmaskedValue']> = ref('');\n  const typed: Ref<InputMask<Opts>['typedValue']> = ref();\n  let $el: MaskElement | undefined;\n  let $lastAcceptedValue: InputMask<Opts>['value'] | undefined = masked.value;\n  let $lastAcceptedUnmaskedValue: InputMask<Opts>['unmaskedValue'] | undefined = unmasked.value;\n  let $lastAcceptedTypedValue: InputMask<Opts>['typedValue'] | undefined = typed.value;\n\n  function storeLastAcceptedValues () {\n    $lastAcceptedTypedValue = typed.value = (mask.value as InputMask<Opts>).typedValue;\n    $lastAcceptedUnmaskedValue = unmasked.value = (mask.value as InputMask<Opts>).unmaskedValue;\n    $lastAcceptedValue = masked.value = (mask.value as InputMask<Opts>).value;\n  }\n\n  function _onAccept (event?: InputEvent) {\n    storeLastAcceptedValues();\n\n    if (emit) {\n      emit('accept', masked.value, event);\n      emit('accept:masked', masked.value, event);\n      emit('accept:typed', typed.value, event);\n      emit('accept:unmasked', unmasked.value, event);\n    }\n    onAccept?.(event);\n  }\n\n  function _onComplete (event?: InputEvent) {\n    if (emit) {\n      emit('complete', (mask.value as InputMask<Opts>).value, event);\n      emit('complete:masked', (mask.value as InputMask<Opts>).value, event);\n      emit('complete:typed', (mask.value as InputMask<Opts>).typedValue, event);\n      emit('complete:unmasked', (mask.value as InputMask<Opts>).unmaskedValue, event);\n    }\n    onComplete?.(event);\n  }\n\n  const updateUnmaskedValue = () => {\n    if (!mask.value || unmasked.value === undefined) return;\n\n    if ($lastAcceptedUnmaskedValue !== unmasked.value) {\n      mask.value.unmaskedValue = unmasked.value;\n      if (mask.value.unmaskedValue !== unmasked.value) _onAccept();\n    }\n    $lastAcceptedUnmaskedValue = undefined;\n  };\n  watch(unmasked, updateUnmaskedValue);\n\n  const updateMaskedValue = () => {\n    if (!mask.value || masked.value === undefined) return;\n\n    if ($lastAcceptedValue !== masked.value) {\n      mask.value.value = masked.value;\n      if (mask.value.value !== masked.value) _onAccept();\n    }\n    $lastAcceptedValue = undefined;\n  };\n  watch(masked, updateMaskedValue);\n\n  const updateTypedValue = () => {\n    if (!mask.value || typed.value === undefined) return;\n\n    if ($lastAcceptedTypedValue !== typed.value) {\n      mask.value.typedValue = typed.value;\n      if (!mask.value.masked.typedValueEquals(typed.value)) _onAccept();\n    }\n    $lastAcceptedTypedValue = undefined;\n  }\n  watch(typed, updateTypedValue);\n\n\n  function _initMask () {\n    $el = el.value;\n    const $props = _props.value;\n\n    if (!$el || !$props?.mask) return;\n\n    mask.value = IMask($el, $props);\n\n    if (defaultValue !== undefined) masked.value = defaultValue;\n    if (defaultUnmaskedValue !== undefined) unmasked.value = defaultUnmaskedValue;\n    if (defaultTypedValue !== undefined) typed.value = defaultTypedValue;\n\n    updateUnmaskedValue();\n    updateMaskedValue();\n    updateTypedValue();\n\n    storeLastAcceptedValues();\n\n    mask.value.on('accept', _onAccept).on('complete', _onComplete);\n  }\n\n  function _destroyMask () {\n    mask.value?.destroy();\n    mask.value = undefined;\n  }\n\n  onMounted(_initMask);\n  onUnmounted(_destroyMask);\n\n  watch([el, _props], () => {\n    const $newEl = el.value;\n    const $props = _props.value;\n\n    if (!$props?.mask || $newEl !== $el) _destroyMask();\n    if ($newEl) {\n      if (!mask.value) {\n        _initMask();\n      } else {\n        mask.value.updateOptions($props as any);\n      }\n    }\n  });\n\n  return {\n    el,\n    mask: readonly(mask),\n    masked,\n    unmasked,\n    typed,\n  };\n}\n","export\nfunction extractOptionsFromProps<\n  Props extends Record<string, any>,\n  ExcludeProps extends keyof Props\n> (props: Props, exclude: Readonly<ExcludeProps[]>): Omit<Props, ExcludeProps> {\n  props = {...props};\n\n  // keep only defined props\n  (Object.keys(props) as Array<ExcludeProps>)\n    .forEach(prop => {\n      if (props[prop] === undefined || exclude.includes(prop)) delete props[prop];\n    });\n\n  return props;\n}\n","import { type FactoryOpts } from 'imask';\nimport { h, watch, toRef, defineComponent, PropType } from 'vue-demi';\nimport props from './props';\nimport useIMask, { type ComposableParams } from './composable';\nimport { extractOptionsFromProps } from './utils';\n\n\nexport\ntype MaskProps = FactoryOpts & {\n  modelValue: string,\n  value: string,\n  unmasked: string,\n  typed: any,\n}\n\n// order does matter = priority\nconst VALUE_PROPS = ['typed', 'unmasked', 'value', 'modelValue'] as const; \n\n\nexport default defineComponent<MaskProps>({\n  name: 'imask-input',\n  inheritAttrs: false,\n\n  props: {\n    // plugin\n    modelValue: String,\n    value: String,\n    unmasked: String,\n    typed: { validator: () => true } as unknown as PropType<any>,\n\n    ...props,\n  },\n\n  emits: [\n    'update:modelValue',\n    'update:masked',\n    'update:value',\n    'update:unmasked',\n    'update:typed',\n    'accept',\n    'accept:value',\n    'accept:masked',\n    'accept:unmasked',\n    'accept:typed',\n    'complete',\n    'complete:value',\n    'complete:masked',\n    'complete:unmasked',\n    'complete:typed',\n  ],\n\n  setup (props, { attrs, emit }) {\n    const { el, mask, masked, unmasked, typed } = useIMask(extractOptionsFromProps(props as MaskProps, VALUE_PROPS) as FactoryOpts, {\n      emit,\n      onAccept: (event?: InputEvent) => {\n        // emit more events\n        const v = masked.value;\n        emit('accept:value', v, event);\n        emit('update:value', v, event);\n        emit('update:masked', v, event);\n        emit('update:modelValue', v, event);\n\n        emit('update:unmasked', unmasked.value, event);\n        emit('update:typed', typed.value, event);\n      },\n      onComplete: (event?: InputEvent) => {\n        emit('complete:value', masked.value, event);\n      },\n    } as ComposableParams<MaskProps>);\n\n    const pvalue = toRef(props, 'value');\n    const pmodelValue = toRef(props, 'modelValue');\n    const punmasked = toRef(props, 'unmasked');\n    const ptyped = toRef(props, 'typed');\n\n    masked.value = pmodelValue.value || pvalue.value || '';\n    unmasked.value = punmasked.value || '';\n    typed.value = ptyped.value;\n\n    watch(pvalue, v => masked.value = v);\n    watch(pmodelValue, v => masked.value = v);\n    watch(punmasked, v => unmasked.value = v);\n    watch(ptyped, v => typed.value = v);\n\n    return () => {\n      // TODO type?\n      const data: Record<string, any> = {\n        ...attrs,\n        value: props.value != null ? props.value :\n          props.modelValue != null ? props.modelValue :\n          mask.value ? mask.value.displayValue :\n          '',\n        ref: el,\n      };\n\n      if (!props.mask) {\n        data.onInput = (event: InputEvent) => {\n          emit('update:modelValue', (event.target as HTMLInputElement).value);\n          emit('update:value', (event.target as HTMLInputElement).value);\n        }\n      }\n\n      return h('input', data);\n    };\n  },\n});\n","import { Vue2, type VNode } from 'vue-demi';\nimport IMask, { type InputMask, type FactoryOpts } from 'imask';\nimport props from './props';\nimport { extractOptionsFromProps } from './utils';\n\n\nexport default Vue2?.extend({\n  name: 'imask-input',\n\n  data () {\n    return {} as { maskRef?: InputMask<FactoryOpts> };\n  },\n\n  render (createElement): VNode {\n    const data = {\n      domProps: {\n        value: this.maskRef ? this.maskRef.value : this.value\n      },\n      on: {...this.$listeners},\n    };\n\n    // if there is no mask use default input event\n    if (!this.$props.mask) {\n      data.on.input = (event: InputEvent) => this.$emit('input', (event.target as HTMLInputElement).value);\n    } else {\n      delete data.on.input;\n    }\n\n    return createElement('input', data);\n  },\n\n  mounted () {\n    if (!this.$props.mask) return;\n\n    this._initMask();\n  },\n\n  destroyed () {\n    this._destroyMask();\n  },\n\n  computed: {\n    maskOptions (): FactoryOpts {\n      return extractOptionsFromProps(this.$props, ['value', 'unmask']) as FactoryOpts;\n    },\n  },\n\n  watch: {\n    '$props': {\n      handler (props) {\n        const maskOptions = this.maskOptions;\n        if (maskOptions.mask) {\n          if (this.maskRef) {\n            this.maskRef.updateOptions(maskOptions);\n            if ('value' in props) this._updateValue();\n          } else {\n            this._initMask(maskOptions);\n            if (props.value !== this._maskValue()) this._onAccept();\n          }\n        } else {\n          this._destroyMask();\n          if ('value' in props) (this.$el as HTMLInputElement).value = props.value;\n        }\n      },\n      deep: true\n    }\n  },\n\n  methods: {\n    _maskValue (): any {\n      if (this.unmask === 'typed') return this.maskRef?.typedValue;\n      if (this.unmask) return this.maskRef?.unmaskedValue;\n      return this.maskRef?.value;\n    },\n\n    _updateValue (): void {\n      if (!this.maskRef) return;\n\n      const value = this.value == null && this.unmask !== 'typed' ? '' : this.value;\n      if (this.unmask === 'typed') this.maskRef.typedValue = value;\n      else if (this.unmask) this.maskRef.unmaskedValue = value as string;\n      else this.maskRef.value = value as string;\n    },\n\n    _onAccept (): void {\n      const val = this._maskValue();\n      this.$emit('input', val);\n      this.$emit('accept', val);\n    },\n\n    _onComplete (): void {\n      this.$emit('complete', this._maskValue());\n    },\n\n    _initMask (maskOptions?: FactoryOpts): void {\n      if (!maskOptions) maskOptions = this.maskOptions;\n\n      this.maskRef = IMask((this.$el as HTMLInputElement), maskOptions)\n        .on('accept', this._onAccept.bind(this))\n        .on('complete', this._onComplete.bind(this));\n      this._updateValue();\n    },\n\n    _destroyMask (): void {\n      if (this.maskRef) {\n        this.maskRef.destroy();\n        delete this.maskRef;\n      }\n    }\n  },\n\n  props: {\n    value: {},\n    unmask: {\n      validator: (value) => value === 'typed' || typeof value === 'boolean',\n    },\n    ...props,\n  },\n});\n","import { isVue3 } from 'vue-demi';\n\nimport Component3 from './component3-composition';\nimport Component2 from './component2';\n\n\nexport default isVue3 ? Component3 : Component2;\n","import IMask, { type InputElement, type InputMask, type FactoryArg, type UpdateOpts } from 'imask';\nimport { isVue3 } from 'vue-demi';\n\n\ntype DirectiveMaskElement<Opts extends FactoryArg> = InputElement & { maskRef?: InputMask<Opts> }\n\nexport default {\n  name: 'imask',\n\n  [isVue3 ? 'beforeMount' : 'bind']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>, { value: options }: { value: Opts }) => {\n    if (!options) return;\n\n    initMask(el, options);\n  },\n\n  [isVue3 ? 'updated' : 'update']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>, { value: options }: { value: Opts | UpdateOpts<Opts> }) => {\n    if (options) {\n      if (el.maskRef) {\n        el.maskRef.updateOptions(options as UpdateOpts<Opts>);\n        if (el.value !== el.maskRef.value) el.maskRef._onChange();\n      }\n      else initMask(el, options as Opts);\n    } else {\n      destroyMask(el);\n    }\n  },\n\n  [isVue3 ? 'unmounted' : 'unbind']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>) => {\n    destroyMask(el);\n  }\n};\n\nfunction fireEvent<Opts extends FactoryArg> (el: DirectiveMaskElement<Opts>, eventName: string, data: InputMask<Opts>) {\n  const e = document.createEvent('CustomEvent');\n  e.initCustomEvent(eventName, true, true, data);\n  el.dispatchEvent(e);\n}\n\nfunction initMask<Opts extends FactoryArg> (el: DirectiveMaskElement<Opts>, opts: Opts) {\n  el.maskRef = IMask(el, opts)\n    .on('accept', () => fireEvent(el, 'accept', el.maskRef as InputMask<Opts>))\n    .on('complete', () => fireEvent(el, 'complete', el.maskRef as InputMask<Opts>));\n}\n\nfunction destroyMask <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>) {\n  if (el.maskRef) {\n    el.maskRef.destroy();\n    delete el.maskRef;\n  }\n}\n"],"names":["mask","undefined","prepare","Function","prepareChar","validate","commit","overwrite","type","Boolean","required","default","eager","validator","value","includes","skipInvalid","placeholderChar","String","displayChar","lazy","definitions","Object","blocks","enum","Array","maxLength","Number","from","to","pattern","format","parse","autofix","radix","thousandsSeparator","mapToRadix","scale","normalizeZeros","padFractionalZeros","min","Date","max","dispatch","useIMask","props","_temp","emit","onAccept","onComplete","defaultValue","defaultUnmaskedValue","defaultTypedValue","_props","isRef","ref","el","masked","unmasked","typed","$el","$lastAcceptedValue","$lastAcceptedUnmaskedValue","$lastAcceptedTypedValue","storeLastAcceptedValues","typedValue","unmaskedValue","_onAccept","event","_onComplete","updateUnmaskedValue","watch","updateMaskedValue","updateTypedValue","typedValueEquals","_initMask","$props","IMask","on","_destroyMask","_mask$value","destroy","onMounted","onUnmounted","$newEl","updateOptions","readonly","extractOptionsFromProps","exclude","keys","forEach","prop","VALUE_PROPS","defineComponent","name","inheritAttrs","modelValue","emits","setup","_ref","attrs","v","pvalue","toRef","pmodelValue","punmasked","ptyped","data","displayValue","onInput","target","h","Vue2","extend","render","createElement","domProps","maskRef","$listeners","input","$emit","mounted","destroyed","computed","maskOptions","handler","_updateValue","_maskValue","deep","methods","_this$maskRef","_this$maskRef2","_this$maskRef3","unmask","val","bind","isVue3","Component3","Component2","options","initMask","_ref2","_onChange","destroyMask","fireEvent","eventName","e","document","createEvent","initCustomEvent","dispatchEvent","opts"],"mappings":";;;;;;;;;;AAGA,cAAe;EACb;EACAA,EAAAA,IAAI,EAAEC,SAAqD;EAC3DC,EAAAA,OAAO,EAAEC,QAA4C;EACrDC,EAAAA,WAAW,EAAED,QAAgD;EAC7DE,EAAAA,QAAQ,EAAEF,QAA6C;EACvDG,EAAAA,MAAM,EAAEH,QAA2C;EACnDI,EAAAA,SAAS,EAAE;EACTC,IAAAA,IAAI,EAAEC,OAAO;EACbC,IAAAA,QAAQ,EAAE,KAAK;EACfC,IAAAA,OAAO,EAAEV,SAAAA;KACV;EACDW,EAAAA,KAAK,EAAE;EACLF,IAAAA,QAAQ,EAAE,KAAK;EACfC,IAAAA,OAAO,EAAEV,SAAS;EAClBY,IAAAA,SAAS,EAAGC,KAAc,IAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAACC,QAAQ,CAACD,KAAe,CAAC,IAAI,OAAOA,KAAK,KAAK,SAAA;KACnG;EACDE,EAAAA,WAAW,EAAE;EAAER,IAAAA,IAAI,EAAEC,OAAO;EAAEC,IAAAA,QAAQ,EAAE,KAAK;EAAEC,IAAAA,OAAO,EAAEV,SAAAA;KAAW;EAEnE;EACAgB,EAAAA,eAAe,EAAEC,MAAM;EACvBC,EAAAA,WAAW,EAAED,MAAM;EACnBE,EAAAA,IAAI,EAAE;EAAEZ,IAAAA,IAAI,EAAEC,OAAO;EAAEC,IAAAA,QAAQ,EAAE,KAAK;EAAEC,IAAAA,OAAO,EAAEV,SAAAA;KAAW;EAC5DoB,EAAAA,WAAW,EAAEC,MAAM;EACnBC,EAAAA,MAAM,EAAED,MAAM;EAEd;EACAE,EAAAA,IAAI,EAAEC,KAAK;EAEX;EACAC,EAAAA,SAAS,EAAEC,MAAM;EACjBC,EAAAA,IAAI,EAAED,MAAM;EACZE,EAAAA,EAAE,EAAEF,MAAM;EAEV;EACAG,EAAAA,OAAO,EAAEZ,MAAM;EACfa,EAAAA,MAAM,EAAE5B,QAA2C;EACnD6B,EAAAA,KAAK,EAAE7B,QAA0C;EACjD8B,EAAAA,OAAO,EAAE;EACPvB,IAAAA,QAAQ,EAAE,KAAK;EACfC,IAAAA,OAAO,EAAEV,SAAS;MAClBY,SAAS,EAAGC,KAAc,IAAKA,KAAK,KAAK,KAAK,IAAI,OAAOA,KAAK,KAAK,SAAA;KACpE;EAED;EACAoB,EAAAA,KAAK,EAAEhB,MAAM;EACbiB,EAAAA,kBAAkB,EAAEjB,MAAM;EAC1BkB,EAAAA,UAAU,EAAEX,KAAK;EACjBY,EAAAA,KAAK,EAAEV,MAAM;EACbW,EAAAA,cAAc,EAAE;EACd9B,IAAAA,IAAI,EAAEC,OAAO;EACbC,IAAAA,QAAQ,EAAE,KAAK;EACfC,IAAAA,OAAO,EAAEV,SAAAA;KACV;EACDsC,EAAAA,kBAAkB,EAAE;EAClB/B,IAAAA,IAAI,EAAEC,OAAO;EACbC,IAAAA,QAAQ,EAAE,KAAK;EACfC,IAAAA,OAAO,EAAEV,SAAAA;KACV;EACDuC,EAAAA,GAAG,EAAE,CAACb,MAAM,EAAEc,IAAI,CAAC;EACnBC,EAAAA,GAAG,EAAE,CAACf,MAAM,EAAEc,IAAI,CAAC;EAEnB;EACAE,EAAAA,QAAQ,EAAExC,QAAAA;EACZ,CAAC;;ECvCD,SAASyC,QAAQA,CAGdC,KAAuB,EAAAC,KAAA,EAQxB;IAAA,IAR0B;MACxBC,IAAI;MAAEC,QAAQ;MAAEC,UAAU;MAAEC,YAAY;MAAEC,oBAAoB;EAAEC,IAAAA,iBAAAA;EAC1C,GAAC,GAAAN,KAAA,KAAA,KAAA,CAAA,GAAC,EAAE,GAAAA,KAAA,CAAA;EAO5B,EAAA,MAAMO,MAAM,GAAIC,aAAK,CAACT,KAAK,CAAC,GAAGA,KAAK,GAAGU,WAAG,CAACV,KAAK,CAAe,CAAA;EAC/D,EAAA,MAAMW,EAAgC,GAAGD,WAAG,EAAE,CAAA;EAC9C,EAAA,MAAMvD,IAAsC,GAAGuD,WAAG,EAAE,CAAA;EACpD,EAAA,MAAME,MAAqC,GAAGF,WAAG,CAAC,EAAE,CAAC,CAAA;EACrD,EAAA,MAAMG,QAA+C,GAAGH,WAAG,CAAC,EAAE,CAAC,CAAA;EAC/D,EAAA,MAAMI,KAAyC,GAAGJ,WAAG,EAAE,CAAA;EACvD,EAAA,IAAIK,GAA4B,CAAA;EAChC,EAAA,IAAIC,kBAAwD,GAAGJ,MAAM,CAAC3C,KAAK,CAAA;EAC3E,EAAA,IAAIgD,0BAAwE,GAAGJ,QAAQ,CAAC5C,KAAK,CAAA;EAC7F,EAAA,IAAIiD,uBAAkE,GAAGJ,KAAK,CAAC7C,KAAK,CAAA;IAEpF,SAASkD,uBAAuBA,GAAI;MAClCD,uBAAuB,GAAGJ,KAAK,CAAC7C,KAAK,GAAId,IAAI,CAACc,KAAK,CAAqBmD,UAAU,CAAA;MAClFH,0BAA0B,GAAGJ,QAAQ,CAAC5C,KAAK,GAAId,IAAI,CAACc,KAAK,CAAqBoD,aAAa,CAAA;MAC3FL,kBAAkB,GAAGJ,MAAM,CAAC3C,KAAK,GAAId,IAAI,CAACc,KAAK,CAAqBA,KAAK,CAAA;EAC3E,GAAA;IAEA,SAASqD,SAASA,CAAEC,KAAkB,EAAE;EACtCJ,IAAAA,uBAAuB,EAAE,CAAA;EAEzB,IAAA,IAAIjB,IAAI,EAAE;QACRA,IAAI,CAAC,QAAQ,EAAEU,MAAM,CAAC3C,KAAK,EAAEsD,KAAK,CAAC,CAAA;QACnCrB,IAAI,CAAC,eAAe,EAAEU,MAAM,CAAC3C,KAAK,EAAEsD,KAAK,CAAC,CAAA;QAC1CrB,IAAI,CAAC,cAAc,EAAEY,KAAK,CAAC7C,KAAK,EAAEsD,KAAK,CAAC,CAAA;QACxCrB,IAAI,CAAC,iBAAiB,EAAEW,QAAQ,CAAC5C,KAAK,EAAEsD,KAAK,CAAC,CAAA;EAChD,KAAA;EACApB,IAAAA,QAAQ,IAARA,IAAAA,IAAAA,QAAQ,CAAGoB,KAAK,CAAC,CAAA;EACnB,GAAA;IAEA,SAASC,WAAWA,CAAED,KAAkB,EAAE;EACxC,IAAA,IAAIrB,IAAI,EAAE;QACRA,IAAI,CAAC,UAAU,EAAG/C,IAAI,CAACc,KAAK,CAAqBA,KAAK,EAAEsD,KAAK,CAAC,CAAA;QAC9DrB,IAAI,CAAC,iBAAiB,EAAG/C,IAAI,CAACc,KAAK,CAAqBA,KAAK,EAAEsD,KAAK,CAAC,CAAA;QACrErB,IAAI,CAAC,gBAAgB,EAAG/C,IAAI,CAACc,KAAK,CAAqBmD,UAAU,EAAEG,KAAK,CAAC,CAAA;QACzErB,IAAI,CAAC,mBAAmB,EAAG/C,IAAI,CAACc,KAAK,CAAqBoD,aAAa,EAAEE,KAAK,CAAC,CAAA;EACjF,KAAA;EACAnB,IAAAA,UAAU,IAAVA,IAAAA,IAAAA,UAAU,CAAGmB,KAAK,CAAC,CAAA;EACrB,GAAA;IAEA,MAAME,mBAAmB,GAAGA,MAAM;MAChC,IAAI,CAACtE,IAAI,CAACc,KAAK,IAAI4C,QAAQ,CAAC5C,KAAK,KAAKb,SAAS,EAAE,OAAA;EAEjD,IAAA,IAAI6D,0BAA0B,KAAKJ,QAAQ,CAAC5C,KAAK,EAAE;EACjDd,MAAAA,IAAI,CAACc,KAAK,CAACoD,aAAa,GAAGR,QAAQ,CAAC5C,KAAK,CAAA;EACzC,MAAA,IAAId,IAAI,CAACc,KAAK,CAACoD,aAAa,KAAKR,QAAQ,CAAC5C,KAAK,EAAEqD,SAAS,EAAE,CAAA;EAC9D,KAAA;EACAL,IAAAA,0BAA0B,GAAG7D,SAAS,CAAA;KACvC,CAAA;EACDsE,EAAAA,aAAK,CAACb,QAAQ,EAAEY,mBAAmB,CAAC,CAAA;IAEpC,MAAME,iBAAiB,GAAGA,MAAM;MAC9B,IAAI,CAACxE,IAAI,CAACc,KAAK,IAAI2C,MAAM,CAAC3C,KAAK,KAAKb,SAAS,EAAE,OAAA;EAE/C,IAAA,IAAI4D,kBAAkB,KAAKJ,MAAM,CAAC3C,KAAK,EAAE;EACvCd,MAAAA,IAAI,CAACc,KAAK,CAACA,KAAK,GAAG2C,MAAM,CAAC3C,KAAK,CAAA;EAC/B,MAAA,IAAId,IAAI,CAACc,KAAK,CAACA,KAAK,KAAK2C,MAAM,CAAC3C,KAAK,EAAEqD,SAAS,EAAE,CAAA;EACpD,KAAA;EACAN,IAAAA,kBAAkB,GAAG5D,SAAS,CAAA;KAC/B,CAAA;EACDsE,EAAAA,aAAK,CAACd,MAAM,EAAEe,iBAAiB,CAAC,CAAA;IAEhC,MAAMC,gBAAgB,GAAGA,MAAM;MAC7B,IAAI,CAACzE,IAAI,CAACc,KAAK,IAAI6C,KAAK,CAAC7C,KAAK,KAAKb,SAAS,EAAE,OAAA;EAE9C,IAAA,IAAI8D,uBAAuB,KAAKJ,KAAK,CAAC7C,KAAK,EAAE;EAC3Cd,MAAAA,IAAI,CAACc,KAAK,CAACmD,UAAU,GAAGN,KAAK,CAAC7C,KAAK,CAAA;EACnC,MAAA,IAAI,CAACd,IAAI,CAACc,KAAK,CAAC2C,MAAM,CAACiB,gBAAgB,CAACf,KAAK,CAAC7C,KAAK,CAAC,EAAEqD,SAAS,EAAE,CAAA;EACnE,KAAA;EACAJ,IAAAA,uBAAuB,GAAG9D,SAAS,CAAA;KACpC,CAAA;EACDsE,EAAAA,aAAK,CAACZ,KAAK,EAAEc,gBAAgB,CAAC,CAAA;IAG9B,SAASE,SAASA,GAAI;MACpBf,GAAG,GAAGJ,EAAE,CAAC1C,KAAK,CAAA;EACd,IAAA,MAAM8D,MAAM,GAAGvB,MAAM,CAACvC,KAAK,CAAA;MAE3B,IAAI,CAAC8C,GAAG,IAAI,EAACgB,MAAM,IAANA,IAAAA,IAAAA,MAAM,CAAE5E,IAAI,CAAE,EAAA,OAAA;MAE3BA,IAAI,CAACc,KAAK,GAAG+D,sBAAK,CAACjB,GAAG,EAAEgB,MAAM,CAAC,CAAA;MAE/B,IAAI1B,YAAY,KAAKjD,SAAS,EAAEwD,MAAM,CAAC3C,KAAK,GAAGoC,YAAY,CAAA;MAC3D,IAAIC,oBAAoB,KAAKlD,SAAS,EAAEyD,QAAQ,CAAC5C,KAAK,GAAGqC,oBAAoB,CAAA;MAC7E,IAAIC,iBAAiB,KAAKnD,SAAS,EAAE0D,KAAK,CAAC7C,KAAK,GAAGsC,iBAAiB,CAAA;EAEpEkB,IAAAA,mBAAmB,EAAE,CAAA;EACrBE,IAAAA,iBAAiB,EAAE,CAAA;EACnBC,IAAAA,gBAAgB,EAAE,CAAA;EAElBT,IAAAA,uBAAuB,EAAE,CAAA;EAEzBhE,IAAAA,IAAI,CAACc,KAAK,CAACgE,EAAE,CAAC,QAAQ,EAAEX,SAAS,CAAC,CAACW,EAAE,CAAC,UAAU,EAAET,WAAW,CAAC,CAAA;EAChE,GAAA;IAEA,SAASU,YAAYA,GAAI;EAAA,IAAA,IAAAC,WAAA,CAAA;MACvB,CAAAA,WAAA,GAAAhF,IAAI,CAACc,KAAK,aAAVkE,WAAA,CAAYC,OAAO,EAAE,CAAA;MACrBjF,IAAI,CAACc,KAAK,GAAGb,SAAS,CAAA;EACxB,GAAA;IAEAiF,iBAAS,CAACP,SAAS,CAAC,CAAA;IACpBQ,mBAAW,CAACJ,YAAY,CAAC,CAAA;EAEzBR,EAAAA,aAAK,CAAC,CAACf,EAAE,EAAEH,MAAM,CAAC,EAAE,MAAM;EACxB,IAAA,MAAM+B,MAAM,GAAG5B,EAAE,CAAC1C,KAAK,CAAA;EACvB,IAAA,MAAM8D,MAAM,GAAGvB,MAAM,CAACvC,KAAK,CAAA;EAE3B,IAAA,IAAI,EAAC8D,MAAM,IAANA,IAAAA,IAAAA,MAAM,CAAE5E,IAAI,CAAIoF,IAAAA,MAAM,KAAKxB,GAAG,EAAEmB,YAAY,EAAE,CAAA;EACnD,IAAA,IAAIK,MAAM,EAAE;EACV,MAAA,IAAI,CAACpF,IAAI,CAACc,KAAK,EAAE;EACf6D,QAAAA,SAAS,EAAE,CAAA;EACb,OAAC,MAAM;EACL3E,QAAAA,IAAI,CAACc,KAAK,CAACuE,aAAa,CAACT,MAAa,CAAC,CAAA;EACzC,OAAA;EACF,KAAA;EACF,GAAC,CAAC,CAAA;IAEF,OAAO;MACLpB,EAAE;EACFxD,IAAAA,IAAI,EAAEsF,gBAAQ,CAACtF,IAAI,CAAC;MACpByD,MAAM;MACNC,QAAQ;EACRC,IAAAA,KAAAA;KACD,CAAA;EACH;;EClKA,SAAS4B,uBAAuBA,CAG7B1C,KAAY,EAAE2C,OAAiC,EAA6B;EAC7E3C,EAAAA,KAAK,GAAG;MAAC,GAAGA,KAAAA;KAAM,CAAA;;EAElB;IACCvB,MAAM,CAACmE,IAAI,CAAC5C,KAAK,CAAC,CAChB6C,OAAO,CAACC,IAAI,IAAI;EACf,IAAA,IAAI9C,KAAK,CAAC8C,IAAI,CAAC,KAAK1F,SAAS,IAAIuF,OAAO,CAACzE,QAAQ,CAAC4E,IAAI,CAAC,EAAE,OAAO9C,KAAK,CAAC8C,IAAI,CAAC,CAAA;EAC7E,GAAC,CAAC,CAAA;EAEJ,EAAA,OAAO9C,KAAK,CAAA;EACd;;ECCA;EACA,MAAM+C,WAAW,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,YAAY,CAAU,CAAA;AAGzE,mBAAeC,uBAAe,CAAY;EACxCC,EAAAA,IAAI,EAAE,aAAa;EACnBC,EAAAA,YAAY,EAAE,KAAK;EAEnBlD,EAAAA,KAAK,EAAE;EACL;EACAmD,IAAAA,UAAU,EAAE9E,MAAM;EAClBJ,IAAAA,KAAK,EAAEI,MAAM;EACbwC,IAAAA,QAAQ,EAAExC,MAAM;EAChByC,IAAAA,KAAK,EAAE;QAAE9C,SAAS,EAAEA,MAAM,IAAA;OAAkC;MAE5D,GAAGgC,KAAAA;KACJ;EAEDoD,EAAAA,KAAK,EAAE,CACL,mBAAmB,EACnB,eAAe,EACf,cAAc,EACd,iBAAiB,EACjB,cAAc,EACd,QAAQ,EACR,cAAc,EACd,eAAe,EACf,iBAAiB,EACjB,cAAc,EACd,UAAU,EACV,gBAAgB,EAChB,iBAAiB,EACjB,mBAAmB,EACnB,gBAAgB,CACjB;EAEDC,EAAAA,KAAKA,CAAErD,KAAK,EAAAsD,IAAA,EAAmB;MAAA,IAAjB;QAAEC,KAAK;EAAErD,MAAAA,IAAAA;EAAK,KAAC,GAAAoD,IAAA,CAAA;MAC3B,MAAM;QAAE3C,EAAE;QAAExD,IAAI;QAAEyD,MAAM;QAAEC,QAAQ;EAAEC,MAAAA,KAAAA;OAAO,GAAGf,QAAQ,CAAC2C,uBAAuB,CAAC1C,KAAK,EAAe+C,WAAW,CAAC,EAAiB;QAC9H7C,IAAI;QACJC,QAAQ,EAAGoB,KAAkB,IAAK;EAChC;EACA,QAAA,MAAMiC,CAAC,GAAG5C,MAAM,CAAC3C,KAAK,CAAA;EACtBiC,QAAAA,IAAI,CAAC,cAAc,EAAEsD,CAAC,EAAEjC,KAAK,CAAC,CAAA;EAC9BrB,QAAAA,IAAI,CAAC,cAAc,EAAEsD,CAAC,EAAEjC,KAAK,CAAC,CAAA;EAC9BrB,QAAAA,IAAI,CAAC,eAAe,EAAEsD,CAAC,EAAEjC,KAAK,CAAC,CAAA;EAC/BrB,QAAAA,IAAI,CAAC,mBAAmB,EAAEsD,CAAC,EAAEjC,KAAK,CAAC,CAAA;UAEnCrB,IAAI,CAAC,iBAAiB,EAAEW,QAAQ,CAAC5C,KAAK,EAAEsD,KAAK,CAAC,CAAA;UAC9CrB,IAAI,CAAC,cAAc,EAAEY,KAAK,CAAC7C,KAAK,EAAEsD,KAAK,CAAC,CAAA;SACzC;QACDnB,UAAU,EAAGmB,KAAkB,IAAK;UAClCrB,IAAI,CAAC,gBAAgB,EAAEU,MAAM,CAAC3C,KAAK,EAAEsD,KAAK,CAAC,CAAA;EAC7C,OAAA;EACF,KAAgC,CAAC,CAAA;EAEjC,IAAA,MAAMkC,MAAM,GAAGC,aAAK,CAAC1D,KAAK,EAAE,OAAO,CAAC,CAAA;EACpC,IAAA,MAAM2D,WAAW,GAAGD,aAAK,CAAC1D,KAAK,EAAE,YAAY,CAAC,CAAA;EAC9C,IAAA,MAAM4D,SAAS,GAAGF,aAAK,CAAC1D,KAAK,EAAE,UAAU,CAAC,CAAA;EAC1C,IAAA,MAAM6D,MAAM,GAAGH,aAAK,CAAC1D,KAAK,EAAE,OAAO,CAAC,CAAA;MAEpCY,MAAM,CAAC3C,KAAK,GAAG0F,WAAW,CAAC1F,KAAK,IAAIwF,MAAM,CAACxF,KAAK,IAAI,EAAE,CAAA;EACtD4C,IAAAA,QAAQ,CAAC5C,KAAK,GAAG2F,SAAS,CAAC3F,KAAK,IAAI,EAAE,CAAA;EACtC6C,IAAAA,KAAK,CAAC7C,KAAK,GAAG4F,MAAM,CAAC5F,KAAK,CAAA;MAE1ByD,aAAK,CAAC+B,MAAM,EAAED,CAAC,IAAI5C,MAAM,CAAC3C,KAAK,GAAGuF,CAAC,CAAC,CAAA;MACpC9B,aAAK,CAACiC,WAAW,EAAEH,CAAC,IAAI5C,MAAM,CAAC3C,KAAK,GAAGuF,CAAC,CAAC,CAAA;MACzC9B,aAAK,CAACkC,SAAS,EAAEJ,CAAC,IAAI3C,QAAQ,CAAC5C,KAAK,GAAGuF,CAAC,CAAC,CAAA;MACzC9B,aAAK,CAACmC,MAAM,EAAEL,CAAC,IAAI1C,KAAK,CAAC7C,KAAK,GAAGuF,CAAC,CAAC,CAAA;EAEnC,IAAA,OAAO,MAAM;EACX;EACA,MAAA,MAAMM,IAAyB,GAAG;EAChC,QAAA,GAAGP,KAAK;EACRtF,QAAAA,KAAK,EAAE+B,KAAK,CAAC/B,KAAK,IAAI,IAAI,GAAG+B,KAAK,CAAC/B,KAAK,GACtC+B,KAAK,CAACmD,UAAU,IAAI,IAAI,GAAGnD,KAAK,CAACmD,UAAU,GAC3ChG,IAAI,CAACc,KAAK,GAAGd,IAAI,CAACc,KAAK,CAAC8F,YAAY,GACpC,EAAE;EACJrD,QAAAA,GAAG,EAAEC,EAAAA;SACN,CAAA;EAED,MAAA,IAAI,CAACX,KAAK,CAAC7C,IAAI,EAAE;EACf2G,QAAAA,IAAI,CAACE,OAAO,GAAIzC,KAAiB,IAAK;YACpCrB,IAAI,CAAC,mBAAmB,EAAGqB,KAAK,CAAC0C,MAAM,CAAsBhG,KAAK,CAAC,CAAA;YACnEiC,IAAI,CAAC,cAAc,EAAGqB,KAAK,CAAC0C,MAAM,CAAsBhG,KAAK,CAAC,CAAA;WAC/D,CAAA;EACH,OAAA;EAEA,MAAA,OAAOiG,SAAC,CAAC,OAAO,EAAEJ,IAAI,CAAC,CAAA;OACxB,CAAA;EACH,GAAA;EACF,CAAC,CAAC;;ACnGF,mBAAeK,YAAI,IAAA,IAAA,GAAA,KAAA,CAAA,GAAJA,YAAI,CAAEC,MAAM,CAAC;EAC1BnB,EAAAA,IAAI,EAAE,aAAa;EAEnBa,EAAAA,IAAIA,GAAI;EACN,IAAA,OAAO,EAAE,CAAA;KACV;IAEDO,MAAMA,CAAEC,aAAa,EAAS;EAC5B,IAAA,MAAMR,IAAI,GAAG;EACXS,MAAAA,QAAQ,EAAE;EACRtG,QAAAA,KAAK,EAAE,IAAI,CAACuG,OAAO,GAAG,IAAI,CAACA,OAAO,CAACvG,KAAK,GAAG,IAAI,CAACA,KAAAA;SACjD;EACDgE,MAAAA,EAAE,EAAE;EAAC,QAAA,GAAG,IAAI,CAACwC,UAAAA;EAAU,OAAA;OACxB,CAAA;;EAED;EACA,IAAA,IAAI,CAAC,IAAI,CAAC1C,MAAM,CAAC5E,IAAI,EAAE;EACrB2G,MAAAA,IAAI,CAAC7B,EAAE,CAACyC,KAAK,GAAInD,KAAiB,IAAK,IAAI,CAACoD,KAAK,CAAC,OAAO,EAAGpD,KAAK,CAAC0C,MAAM,CAAsBhG,KAAK,CAAC,CAAA;EACtG,KAAC,MAAM;EACL,MAAA,OAAO6F,IAAI,CAAC7B,EAAE,CAACyC,KAAK,CAAA;EACtB,KAAA;EAEA,IAAA,OAAOJ,aAAa,CAAC,OAAO,EAAER,IAAI,CAAC,CAAA;KACpC;EAEDc,EAAAA,OAAOA,GAAI;EACT,IAAA,IAAI,CAAC,IAAI,CAAC7C,MAAM,CAAC5E,IAAI,EAAE,OAAA;MAEvB,IAAI,CAAC2E,SAAS,EAAE,CAAA;KACjB;EAED+C,EAAAA,SAASA,GAAI;MACX,IAAI,CAAC3C,YAAY,EAAE,CAAA;KACpB;EAED4C,EAAAA,QAAQ,EAAE;EACRC,IAAAA,WAAWA,GAAiB;QAC1B,OAAOrC,uBAAuB,CAAC,IAAI,CAACX,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAA;EAClE,KAAA;KACD;EAEDL,EAAAA,KAAK,EAAE;EACL,IAAA,QAAQ,EAAE;QACRsD,OAAOA,CAAEhF,KAAK,EAAE;EACd,QAAA,MAAM+E,WAAW,GAAG,IAAI,CAACA,WAAW,CAAA;UACpC,IAAIA,WAAW,CAAC5H,IAAI,EAAE;YACpB,IAAI,IAAI,CAACqH,OAAO,EAAE;EAChB,YAAA,IAAI,CAACA,OAAO,CAAChC,aAAa,CAACuC,WAAW,CAAC,CAAA;cACvC,IAAI,OAAO,IAAI/E,KAAK,EAAE,IAAI,CAACiF,YAAY,EAAE,CAAA;EAC3C,WAAC,MAAM;EACL,YAAA,IAAI,CAACnD,SAAS,CAACiD,WAAW,CAAC,CAAA;EAC3B,YAAA,IAAI/E,KAAK,CAAC/B,KAAK,KAAK,IAAI,CAACiH,UAAU,EAAE,EAAE,IAAI,CAAC5D,SAAS,EAAE,CAAA;EACzD,WAAA;EACF,SAAC,MAAM;YACL,IAAI,CAACY,YAAY,EAAE,CAAA;EACnB,UAAA,IAAI,OAAO,IAAIlC,KAAK,EAAG,IAAI,CAACe,GAAG,CAAsB9C,KAAK,GAAG+B,KAAK,CAAC/B,KAAK,CAAA;EAC1E,SAAA;SACD;EACDkH,MAAAA,IAAI,EAAE,IAAA;EACR,KAAA;KACD;EAEDC,EAAAA,OAAO,EAAE;EACPF,IAAAA,UAAUA,GAAS;EAAA,MAAA,IAAAG,aAAA,EAAAC,cAAA,EAAAC,cAAA,CAAA;EACjB,MAAA,IAAI,IAAI,CAACC,MAAM,KAAK,OAAO,EAAE,OAAA,CAAAH,aAAA,GAAO,IAAI,CAACb,OAAO,KAAZa,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAA,CAAcjE,UAAU,CAAA;EAC5D,MAAA,IAAI,IAAI,CAACoE,MAAM,EAAE,OAAAF,CAAAA,cAAA,GAAO,IAAI,CAACd,OAAO,KAAZc,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,cAAA,CAAcjE,aAAa,CAAA;QACnD,OAAAkE,CAAAA,cAAA,GAAO,IAAI,CAACf,OAAO,KAAZe,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,cAAA,CAActH,KAAK,CAAA;OAC3B;EAEDgH,IAAAA,YAAYA,GAAU;EACpB,MAAA,IAAI,CAAC,IAAI,CAACT,OAAO,EAAE,OAAA;EAEnB,MAAA,MAAMvG,KAAK,GAAG,IAAI,CAACA,KAAK,IAAI,IAAI,IAAI,IAAI,CAACuH,MAAM,KAAK,OAAO,GAAG,EAAE,GAAG,IAAI,CAACvH,KAAK,CAAA;EAC7E,MAAA,IAAI,IAAI,CAACuH,MAAM,KAAK,OAAO,EAAE,IAAI,CAAChB,OAAO,CAACpD,UAAU,GAAGnD,KAAK,CAAC,KACxD,IAAI,IAAI,CAACuH,MAAM,EAAE,IAAI,CAAChB,OAAO,CAACnD,aAAa,GAAGpD,KAAe,CAAC,KAC9D,IAAI,CAACuG,OAAO,CAACvG,KAAK,GAAGA,KAAe,CAAA;OAC1C;EAEDqD,IAAAA,SAASA,GAAU;EACjB,MAAA,MAAMmE,GAAG,GAAG,IAAI,CAACP,UAAU,EAAE,CAAA;EAC7B,MAAA,IAAI,CAACP,KAAK,CAAC,OAAO,EAAEc,GAAG,CAAC,CAAA;EACxB,MAAA,IAAI,CAACd,KAAK,CAAC,QAAQ,EAAEc,GAAG,CAAC,CAAA;OAC1B;EAEDjE,IAAAA,WAAWA,GAAU;QACnB,IAAI,CAACmD,KAAK,CAAC,UAAU,EAAE,IAAI,CAACO,UAAU,EAAE,CAAC,CAAA;OAC1C;MAEDpD,SAASA,CAAEiD,WAAyB,EAAQ;EAC1C,MAAA,IAAI,CAACA,WAAW,EAAEA,WAAW,GAAG,IAAI,CAACA,WAAW,CAAA;EAEhD,MAAA,IAAI,CAACP,OAAO,GAAGxC,sBAAK,CAAE,IAAI,CAACjB,GAAG,EAAuBgE,WAAW,CAAC,CAC9D9C,EAAE,CAAC,QAAQ,EAAE,IAAI,CAACX,SAAS,CAACoE,IAAI,CAAC,IAAI,CAAC,CAAC,CACvCzD,EAAE,CAAC,UAAU,EAAE,IAAI,CAACT,WAAW,CAACkE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;QAC9C,IAAI,CAACT,YAAY,EAAE,CAAA;OACpB;EAED/C,IAAAA,YAAYA,GAAU;QACpB,IAAI,IAAI,CAACsC,OAAO,EAAE;EAChB,QAAA,IAAI,CAACA,OAAO,CAACpC,OAAO,EAAE,CAAA;UACtB,OAAO,IAAI,CAACoC,OAAO,CAAA;EACrB,OAAA;EACF,KAAA;KACD;EAEDxE,EAAAA,KAAK,EAAE;MACL/B,KAAK,EAAE,EAAE;EACTuH,IAAAA,MAAM,EAAE;QACNxH,SAAS,EAAGC,KAAK,IAAKA,KAAK,KAAK,OAAO,IAAI,OAAOA,KAAK,KAAK,SAAA;OAC7D;MACD,GAAG+B,KAAAA;EACL,GAAA;EACF,CAAC,CAAC;;AChHF,kBAAe2F,cAAM,GAAGC,UAAU,GAAGC,UAAU;;ACA/C,kBAAe;EACb5C,EAAAA,IAAI,EAAE,OAAO;IAEb,CAAC0C,cAAM,GAAG,aAAa,GAAG,MAAM,GAAG,CAA0BhF,EAA8B,EAAA2C,IAAA,KAA0C;MAAA,IAAxC;EAAErF,MAAAA,KAAK,EAAE6H,OAAAA;EAAyB,KAAC,GAAAxC,IAAA,CAAA;MAC9H,IAAI,CAACwC,OAAO,EAAE,OAAA;EAEdC,IAAAA,QAAQ,CAACpF,EAAE,EAAEmF,OAAO,CAAC,CAAA;KACtB;IAED,CAACH,cAAM,GAAG,SAAS,GAAG,QAAQ,GAAG,CAA0BhF,EAA8B,EAAAqF,KAAA,KAA6D;MAAA,IAA3D;EAAE/H,MAAAA,KAAK,EAAE6H,OAAAA;EAA4C,KAAC,GAAAE,KAAA,CAAA;EAC/I,IAAA,IAAIF,OAAO,EAAE;QACX,IAAInF,EAAE,CAAC6D,OAAO,EAAE;EACd7D,QAAAA,EAAE,CAAC6D,OAAO,CAAChC,aAAa,CAACsD,OAA2B,CAAC,CAAA;EACrD,QAAA,IAAInF,EAAE,CAAC1C,KAAK,KAAK0C,EAAE,CAAC6D,OAAO,CAACvG,KAAK,EAAE0C,EAAE,CAAC6D,OAAO,CAACyB,SAAS,EAAE,CAAA;EAC3D,OAAC,MACIF,QAAQ,CAACpF,EAAE,EAAEmF,OAAe,CAAC,CAAA;EACpC,KAAC,MAAM;QACLI,WAAW,CAACvF,EAAE,CAAC,CAAA;EACjB,KAAA;KACD;EAED,EAAA,CAACgF,cAAM,GAAG,WAAW,GAAG,QAAQ,GAA6BhF,EAA8B,IAAK;MAC9FuF,WAAW,CAACvF,EAAE,CAAC,CAAA;EACjB,GAAA;EACF,CAAC,CAAA;EAED,SAASwF,SAASA,CAA2BxF,EAA8B,EAAEyF,SAAiB,EAAEtC,IAAqB,EAAE;EACrH,EAAA,MAAMuC,CAAC,GAAGC,QAAQ,CAACC,WAAW,CAAC,aAAa,CAAC,CAAA;IAC7CF,CAAC,CAACG,eAAe,CAACJ,SAAS,EAAE,IAAI,EAAE,IAAI,EAAEtC,IAAI,CAAC,CAAA;EAC9CnD,EAAAA,EAAE,CAAC8F,aAAa,CAACJ,CAAC,CAAC,CAAA;EACrB,CAAA;EAEA,SAASN,QAAQA,CAA2BpF,EAA8B,EAAE+F,IAAU,EAAE;EACtF/F,EAAAA,EAAE,CAAC6D,OAAO,GAAGxC,sBAAK,CAACrB,EAAE,EAAE+F,IAAI,CAAC,CACzBzE,EAAE,CAAC,QAAQ,EAAE,MAAMkE,SAAS,CAACxF,EAAE,EAAE,QAAQ,EAAEA,EAAE,CAAC6D,OAA0B,CAAC,CAAC,CAC1EvC,EAAE,CAAC,UAAU,EAAE,MAAMkE,SAAS,CAACxF,EAAE,EAAE,UAAU,EAAEA,EAAE,CAAC6D,OAA0B,CAAC,CAAC,CAAA;EACnF,CAAA;EAEA,SAAS0B,WAAWA,CAA2BvF,EAA8B,EAAE;IAC7E,IAAIA,EAAE,CAAC6D,OAAO,EAAE;EACd7D,IAAAA,EAAE,CAAC6D,OAAO,CAACpC,OAAO,EAAE,CAAA;MACpB,OAAOzB,EAAE,CAAC6D,OAAO,CAAA;EACnB,GAAA;EACF;;;;;;;;;;;;;;;"}